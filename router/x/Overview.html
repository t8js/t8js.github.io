<!DOCTYPE html>
<html lang="en" data-layout="section">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="T8 Router: Overview">
  <title>Overview | T8 Router</title>
  <link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.3/dist/css/base.css">
  <link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.3/dist/css/section.css">
  <link rel="icon" type="image/png" href="/assets/t8.png">
</head>
<body>
<div class="layout">
<div class="body">
<main>
<h1><a href="/router/">T8 Router</a></h1>
<h2 id="Initialization">Initialization</h2>
<p>A <code>Route</code> instance exposes methods for URL navigation without full-page reloads resembling the methods exposed by <code>window.location</code> for regular URL navigation.</p>
<pre><code class="language-js">import { Route } from "@t8/router";

let route = new Route();
</code></pre>
<p>⬥ The <code>new Route(url)</code> constructor accepts an optional URL. In the browser, the current URL is implied if <code>url</code> is omitted.</p>
<h2 id="Navigation">Navigation</h2>
<pre><code class="language-diff">- window.location.assign("/intro");
+ route.assign("/intro");

- window.location.replace("/intro");
+ route.replace("/intro");

- window.location.href = "/intro";
+ route.href = "/intro";

- console.log(window.location.href);
+ console.log(route.href);
</code></pre>
<p>⬥ The route navigation API is largely in line with the built-in navigation APIs. An instance of <code>Route</code> exposes: <code>.assign(url)</code>, <code>.replace(url)</code>, <code>.reload()</code>, <code>.href</code>, <code>.pathname</code>, <code>.search</code>, <code>.hash</code>, <code>.back()</code>, <code>.forward()</code>, <code>.go(delta)</code> — similar to the built-in APIs of <code>window.location</code> and <code>history</code> carried over to route-based SPA navigation.</p>
<h2 id="Optional_link_attributes">Optional link attributes</h2>
<p>⬥ <code>data-history="replace"</code> added to a link changes its navigation mode, so that clicking the link replaces the current history navigation entry rather than keeps it as a previous record (similarly to calling <code>route.replace(url)</code>), effectively preventing the user from returning to the current URL by pressing the browser's <em>Back</em> button.</p>
<p>⬥ <code>data-spa="off"</code> turns off SPA navigation for the given link and makes it act like an ordinary HTML link triggering a full-page reload.</p>
<p>⬥ <code>data-scroll="off"</code> turns off the default scrolling behavior when the link with this attribute is clicked. By default, similarly to the behavior of regular HTML links, the page is scrolled either to the element whose <code>id</code> matches the link fragment (like <code>#example</code>) if the element is available or to the top of the page otherwise.</p>
<h2 id="Events_&amp;_Middleware">Events &amp; Middleware</h2>
<p>Subscription to the <code>Route</code>'s navigation events allows to hook into the course of the route navigation, with event handlers effectively acting like routing middleware.</p>
<pre><code class="language-js">route.on("navigationstart", ({ href }) =&gt; {
  if (hasUnsavedChanges)
    return false; // prevents navigation

  if (href === "/") {
    route.assign("/intro"); // redirection
    return false; // prevents navigation
  }
});
</code></pre>
<pre><code class="language-js">route.on("navigationcomplete", ({ href }) =&gt; {
  if (href === "/intro")
    document.title = "Intro";
});
</code></pre>
<p>⬥ Handlers of both events are immediately called when they are added if the route is already in the navigation-complete state.</p>
<h2 id="Route_matching">Route matching</h2>
<pre><code class="language-js">console.log(route.href === "/intro");
console.log(route.href.startsWith("/sections/"));
console.log(/^\/sections\/\d+\/?/.test(route.href));
</code></pre>
<pre><code class="language-js">let { ok, params } = route.match(/^\/sections\/(?&lt;id&gt;\d+)\/?/);

console.log(ok, params.id, params[0]);
</code></pre>
<pre><code class="language-js">header.className = route.at("/", "full", "compact");
// at "/" ? "full" : "compact"

let sectionTitle = route.at(
  /^\/sections\/(?&lt;id&gt;\d+)\/?/,
  ({ params }) =&gt; `Section ${params.id}`
);
// at "/sections/&lt;id&gt;" ? "Section &lt;id&gt;" : undefined
</code></pre>
<p>⬥ With a regular expression route pattern, <code>params</code> contains values of its capturing groups accessible by numeric indices; named capturing group values can also be retrieved by their names (like <code>params.id</code> in the examples above).</p>
<p>⬥ Type-safe <code>params</code> can be obtained by providing a type-safe URL pattern, such as produced by <a href="/url-shape"><em>url-shape</em></a>, to <code>route.match(pattern)</code> or <code>route.at(pattern, x, y)</code>.</p>
<h2 id="Converting_HTML_links_to_SPA_route_links">Converting HTML links to SPA route links</h2>
<pre><code class="language-js">route.observe(document);
</code></pre>
<p>The above line turns all <code>&lt;a&gt;</code> and <code>&lt;area&gt;</code> elements in the <code>document</code> to SPA route links enabling navigation without page reloads via the <code>route</code> object.</p>
<p>⬥ <code>route.observe(container, elements)</code> accepts a container element (it can be <code>document</code>, as in the example above) and optionally <code>elements</code> (which can be a selector or HTML elements) specifying the SPA navigation links.</p>
<pre><code class="language-js">route.observe(document.querySelector("#app"), "nav a");
</code></pre>
<hr>
<ul>
<li><a href="https://codesandbox.io/p/sandbox/n7y5rx?file=%2Fsrc%2Findex.ts" target="_blank">Basic usage example</a></li>
<li><a href="/react-router">T8 React Router</a></li>
</ul>
<p class="pagenav">
  <span class="prev">
    <span class="icon">←</span>
    <a href="/router/">Intro</a>
  </span>
  <span class="sep">|</span>
  <span class="repo next"><a href="https://github.com/t8js/router" target="_blank">GitHub</a> <span class="icon">✦</span></span>
</p>
</main>
<hr>
<nav class="aux">
<section>
<p class="title">Contents</p>
<ul><li><a href="/router/x/Overview#Initialization">Initialization</a></li>
<li><a href="/router/x/Overview#Navigation">Navigation</a></li>
<li><a href="/router/x/Overview#Optional_link_attributes">Optional link attributes</a></li>
<li><a href="/router/x/Overview#Events_%26_Middleware">Events &amp; Middleware</a></li>
<li><a href="/router/x/Overview#Route_matching">Route matching</a></li>
<li><a href="/router/x/Overview#Converting_HTML_links_to_SPA_route_links">Converting HTML links to SPA route links</a></li>
</ul>
<p class="title">Resources</p>
<ul>
  <li><a href="https://github.com/t8js/router" target="_blank">GitHub</a></li>
  <li><a href="https://www.npmjs.com/package/@t8/router" target="_blank">npm</a></li>
</ul>
</section>
<section class="related">
  <p class="title">Also with vanilla TS/JS</p>
  <ul>
    <li><a href="/store" data-name="@t8/store">T8 <strong>Store</strong></a></li>
  </ul>
  <p class="title">With React</p>
  <ul>
    <li><a href="/react-router" data-name="@t8/react-router">T8 <strong>React Router</strong></a></li>
    <li><a href="/react-store" data-name="@t8/react-store">T8 <strong>React Store</strong></a></li>
    <li><a href="/react-pending" data-name="@t8/react-pending">T8 <strong>React Pending</strong></a></li>
  </ul>
</section>
</nav>
</div>
</div>
<link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/stackoverflow-light.min.css" media="(prefers-color-scheme: light)">
<link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/base16/material.min.css" media="(prefers-color-scheme: dark)">
<link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.3/dist/css/code.css">
<script src="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/highlight.min.js"></script>
<script>hljs.highlightAll()</script>
<script src="/assets/stats.js"></script>
</body>
</html>
