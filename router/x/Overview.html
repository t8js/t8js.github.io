<!DOCTYPE html>
<html lang="en" style="--base-color: #3e2b59;">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="T8 Router: Overview">
  <title>Overview | T8 Router</title>
  <link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.2/dist/css/base.css">
  <link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.2/dist/css/section.css">
  <link rel="icon" type="image/png" href="/assets/t8.png">
</head>
<body>
<div class="layout">
<div class="body">
<main>
<h1><a href="/router/" class="name">T8 Router</a></h1>
<h2 id="Initialization">Initialization</h2>
<pre><code class="language-js">import { Route } from "@t8/router";

let route = new Route();
</code></pre>
<p>üîπ The <code>new Route(location)</code> constructor accepts an optional URL location. In the browser, the current URL is implied if <code>location</code> is omitted.</p>
<h2 id="Navigation">Navigation</h2>
<pre><code class="language-diff">- window.location.assign("/intro");
+ route.assign("/intro");

- window.location.replace("/intro");
+ route.replace("/intro");

- window.location.href = "/intro";
+ route.href = "/intro";

- console.log(window.location.href);
+ console.log(route.href);
</code></pre>
<p>üîπ The route navigation API is largely in line with the built-in navigation APIs. An instance of <code>Route</code> exposes: <code>.assign(url)</code>, <code>.replace(url)</code>, <code>.reload()</code>, <code>.href</code>, <code>.pathname</code>, <code>.search</code>, <code>.hash</code>, <code>.back()</code>, <code>.forward()</code>, <code>.go(delta)</code> ‚Äî similar to the built-in APIs of <code>window.location</code> and <code>history</code> carried over to route-based SPA navigation.</p>
<h2 id="Events_&amp;_Middleware">Events &amp; Middleware</h2>
<pre><code class="language-js">route.on("navigationstart", href =&gt; {
  if (hasUnsavedChanges)
    return false; // prevents navigation

  if (href === "/") {
    route.assign("/intro"); // redirection
    return false; // prevents navigation
  }
});
</code></pre>
<pre><code class="language-js">route.on("navigationcomplete", href =&gt; {
  if (href === "/intro")
    document.title = "Intro";
});
</code></pre>
<p>üîπ Both event handlers, acting like routing middleware, are immediately called when they are added if the route is already in the navigation-complete state.</p>
<h2 id="Route_matching">Route matching</h2>
<pre><code class="language-js">console.log(route.href === "/intro");
console.log(route.href.startsWith("/sections/"));
console.log(/^\/sections\/\d+\/?/.test(route.href));
</code></pre>
<pre><code class="language-js">let { ok, params } = route.match(/^\/sections\/(?&lt;id&gt;\d+)\/?/);

console.log(ok, params.id);
</code></pre>
<pre><code class="language-js">header.className = route.at("/", "full", "compact");
// at "/" ? "full" : "compact"

let sectionTitle = route.at(
  /^\/sections\/(?&lt;id&gt;\d+)\/?/,
  ({ params }) =&gt; `Section ${params.id}`
);
// at "/sections/&lt;id&gt;" ? "Section &lt;id&gt;" : undefined
</code></pre>
<p>üîπ Type-safe <code>params</code> can be obtained by providing a type-safe URL pattern, such as produced by <a href="https://github.com/t8js/url-shape#readme" target="_blank"><em>url-shape</em></a>, to <code>route.match(pattern)</code> or <code>route.at(pattern, x, y)</code>.</p>
<h2 id="Converting_HTML_links_to_SPA_route_links">Converting HTML links to SPA route links</h2>
<pre><code class="language-js">route.observe(document);
</code></pre>
<p>The above line turns all <code>&lt;a&gt;</code> and <code>&lt;area&gt;</code> elements in the <code>document</code> to SPA route links enabling navigation without page reloads via the <code>route</code> object.</p>
<p>üîπ <code>route.observe(container, elements)</code> accepts a container element (it can be <code>document</code>, as in the example above) and optionally <code>elements</code> (which can be a selector or HTML elements) specifying the SPA navigation links.</p>
<pre><code class="language-js">route.observe(document.querySelector("#app"), "nav a");
</code></pre>
<hr>
<ul>
<li><a href="https://codesandbox.io/p/sandbox/n7y5rx?file=%2Fsrc%2Findex.ts" target="_blank">Basic usage example</a></li>
<li><a href="/react-router">React router</a></li>
</ul>
<p class="pagenav">
  <span class="prev">
    <span class="icon">‚Üê</span>
    <a href="/router/">Intro</a>
  </span>
  <span class="sep">|</span>
  <span class="repo next"><a href="https://github.com/t8js/router" target="_blank">GitHub</a> <span class="icon">‚ú¶</span></span>
</p>
</main>
<hr>
<nav class="b1">
<section>
<p class="title">Contents</p>
<ul><li><a href="/router/x/Overview#Initialization">Initialization</a></li>
<li><a href="/router/x/Overview#Navigation">Navigation</a></li>
<li><a href="/router/x/Overview#Events_%26_Middleware">Events &amp; Middleware</a></li>
<li><a href="/router/x/Overview#Route_matching">Route matching</a></li>
<li><a href="/router/x/Overview#Converting_HTML_links_to_SPA_route_links">Converting HTML links to SPA route links</a></li>
</ul>
<p class="title">Resources</p>
<ul>
  <li><a href="https://github.com/t8js/router" target="_blank">GitHub</a></li>
</ul>
</section>
<section class="related">
  <p class="title">Also with vanilla TS/JS</p>
  <ul>
    <li><a href="/store" data-name="@t8/store">T8 <strong>Store</strong></a></li>
  </ul>
  <p class="title">With React</p>
  <ul>
    <li><a href="/react-router" data-name="@t8/react-router">T8 <strong>React Router</strong></a></li>
    <li><a href="/react-store" data-name="@t8/react-store">T8 <strong>React Store</strong></a></li>
    <li><a href="/react-pending" data-name="@t8/react-pending">T8 <strong>React Pending</strong></a></li>
  </ul>
</section>
</nav>
</div>
</div>
<link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/stackoverflow-light.min.css" media="(prefers-color-scheme: light)">
<link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/base16/material.min.css" media="(prefers-color-scheme: dark)">
<link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.2/dist/css/code.css">
<script src="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/highlight.min.js"></script>
<script>hljs.highlightAll()</script>
<script src="/assets/stats.js"></script>
</body>
</html>
