<!DOCTYPE html>
<html lang="en" style="--base-color: #5900c8">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="T8 SDK Factory: Custom request handler">
  <title>Custom request handler | T8 SDK Factory</title>
  <link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.1/dist/css/base.css">
  <link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.1/dist/css/section.css">
  <link rel="icon" type="image/png" href="/assets/t8.png">
  <link rel="prefetch" href="/sdk-factory/x/Shorthand_methods">
</head>
<body>
<div class="layout">
<div class="body">
<main>
<h1><a href="/sdk-factory/" class="name">T8 SDK Factory</a></h1>
<h2>Custom request handler</h2>
<p>As shown above, the <code>RequestService</code> constructor takes a custom request handler as a parameter. Internal independence of <code>RequestService</code> from a fixed built-in request handler allows to handle requests of all sorts and environments (the browser or node) without locking in with a certain approach to handling requests.</p>
<p>Here's an example of a basic JSON request handler that can be passed to <code>RequestService</code>:</p>
<pre><code class="language-ts">import {
  RequestHandler,
  RequestError,
  getRequestAction,
  toStringValueMap,
} from "@t8/sdk-factory";

const endpoint = "https://api.example.com";

export const fetchJSON: RequestHandler = async (target, request) =&gt; {
  let { method, url } = getRequestAction({ request, target, endpoint });

  let response = await fetch(url, {
    method,
    headers: toStringValueMap(request?.headers),
    body: request?.body ? JSON.stringify(request?.body) : null,
  });

  let { ok, status, statusText } = response;

  if (!ok) {
    throw new RequestError({
      status,
      statusText,
    });
  }

  try {
    return {
      ok,
      status,
      statusText,
      body: await response.json(),
    };
  }
  catch (error) {
    throw new RequestError(error);
  }
}
</code></pre>
<p>To meet the needs of a specific use case, the request handler's code can certainly depart from the example above (which is again the reason why it's not hardwired into the package).</p>

<p class="pagenav">
  <span class="prev">
    <span class="icon">←</span>
    <a href="/sdk-factory/x/Shorthand_methods">Shorthand methods</a>
  </span>
  <span class="sep">|</span>
  <span class="repo next"><a href="https://github.com/t8js/sdk-factory" target="_blank">GitHub</a> <span class="icon">✦</span></span>
</p>
</main>
<hr>
<nav>
<section><ul>
<li data-id="RequestService"><a href="/sdk-factory/x/RequestService"><code>RequestService</code></a></li>
<li data-id="Schema_definition"><a href="/sdk-factory/x/Schema_definition">Schema definition</a></li>
<li data-id="Shorthand_methods"><a href="/sdk-factory/x/Shorthand_methods">Shorthand methods</a></li>
<li data-id="Custom_request_handler"><strong>Custom request handler</strong></li>
</ul></section>
<section class="ref">
  <ul>
    <li><a href="https://github.com/t8js/sdk-factory" target="_blank">GitHub</a></li>
    
  </ul>
</section>

<section class="related">
  <p class="title">Also with vanilla TS/JS</p>
  <ul>
    <li><a href="/router" data-name="@t8/router">T8 <strong>Router</strong></a></li>
    <li><a href="/store" data-name="@t8/store">T8 <strong>Store</strong></a></li>
  </ul>
  <p class="title">With React</p>
  <ul>
    <li><a href="/react-router" data-name="@t8/react-router">T8 <strong>React Router</strong></a></li>
    <li><a href="/react-store" data-name="@t8/react-store">T8 <strong>React Store</strong></a></li>
    <li><a href="/react-pending" data-name="@t8/react-pending">T8 <strong>React Pending</strong></a></li>
  </ul>
</section>

</nav>
</div>
</div>
<link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/base16/material.min.css">
<link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.1/dist/css/code.css">
<script src="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/highlight.min.js"></script>
<script>hljs.highlightAll()</script>
<script src="/assets/stats.js"></script>
</body>
</html>
