<!DOCTYPE html>
<html lang="en" data-theme="t8" style="--color-scheme: #5900c8">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Schema definition | T8 SDK Factory</title>
  <link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.1/dist/css/base.css">
  <link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.1/dist/css/section.css">
  <link rel="icon" type="image/png" href="/assets/t8.png">
  <link rel="prefetch" href="/sdk-factory/x/Shorthand_methods">
  <link rel="prefetch" href="/sdk-factory/x/RequestService">
</head>
<body>
<div class="layout">
<div class="body">
<main>
<h1><a href="/sdk-factory/" class="name">T8 SDK Factory</a></h1>
<h2 id="schema-definition">Schema definition</h2>
<p>The <code>APISchema</code> type used with the <a href="/sdk-factory/x/RequestService"><code>RequestService</code></a> constructor is a custom schema outlining the types of requests and responses within an API. The example below shows what such a schema may look like.</p>
<pre><code class="language-ts">import type { Schema } from "@t8/sdk-factory";

// wrapping into the `Schema` generic type is optional, but
// this helps validate the basic schema structure
export type APISchema = Schema&lt;{
  // a schema key can be any unique string, for an HTTP API
  // a pair of a method and a path can serve this purpose
  "GET /items/:id": {
    request: {
      // `params` can be omitted if the URL path is fixed and
      // has no parameter placeholders
      params: {
        id: number;
      };
      query?: {
        mode?: "compact" | "full";
      };
    };
    response: {
      body: {
        id: number;
        name?: string;
      };
    };
  };
  "POST /items/:id": {
    // ...
  };
  "GET /items": {
    // ...
  };
  // ... and so forth
}&gt;;
</code></pre>
<p>With such a schema assigned to <code>service</code>, calls to its <code>send()</code> method will be prevalidated against this schema, which means that a type-aware IDE will warn of type mismatches or typos in the parameters:</p>
<pre><code class="language-ts">let { ok, status, body } = await service.send("GET /items/:id", {
  params: {
    id: 10,
  },
  query: {
    mode: "full",
  },
});
</code></pre>
<p>The options passed as the second parameter to <code>send()</code> are validated as <code>APISchema["GET /items/:id"]</code> based on the schema type passed to the <code>RequestService</code> constructor and the first parameter passed to <code>send()</code>.</p>

<p class="pagenav">
  <span class="prev">
    <span class="icon">←</span>
    <a href="/sdk-factory/x/RequestService"><code>RequestService</code></a>
  </span>
  <span class="sep">|</span>
  <span class="next"><a href="/sdk-factory/x/Shorthand_methods">Shorthand methods</a> <span class="icon">→</span></span>
</p>
</main>
<hr>
<nav>
<section><ul>
<li data-id="RequestService"><a href="/sdk-factory/x/RequestService"><code>RequestService</code></a></li>
<li data-id="Schema_definition"><strong>Schema definition</strong></li>
<li data-id="Shorthand_methods"><a href="/sdk-factory/x/Shorthand_methods">Shorthand methods</a></li>
<li data-id="Custom_request_handler"><a href="/sdk-factory/x/Custom_request_handler">Custom request handler</a></li>
</ul></section>
<section class="ref">
  <ul>
    <li><a href="https://github.com/t8js/sdk-factory" target="_blank">GitHub</a></li>
    
  </ul>
</section>

<section class="related">
  <p class="title">Also with vanilla TS/JS</p>
  <ul>
    <li><a href="/router" data-name="@t8/router">T8 <strong>Router</strong></a></li>
    <li><a href="/store" data-name="@t8/store">T8 <strong>Store</strong></a></li>
  </ul>
  <p class="title">With React</p>
  <ul>
    <li><a href="/react-router" data-name="@t8/react-router">T8 <strong>React Router</strong></a></li>
    <li><a href="/react-store" data-name="@t8/react-store">T8 <strong>React Store</strong></a></li>
    <li><a href="/react-pending" data-name="@t8/react-pending">T8 <strong>React Pending</strong></a></li>
  </ul>
</section>

</nav>
</div>
</div>

<link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/base16/material.min.css">
<link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.1/dist/css/code.css">
<script src="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/highlight.min.js"></script>
<script>hljs.highlightAll()</script>
<script>
(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
m[i].l=1*new Date();
for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
(window, document, "script", "https://mc.yandex.com/metrika/tag.js", "ym");
ym(103784239, "init", {clickmap: true, trackLinks: true, accurateTrackBounce: true});
</script>
<noscript><div><img src="https://mc.yandex.com/watch/103784239" style="position:absolute;left:-9999px;" alt=""></div></noscript>
</body>
</html>
