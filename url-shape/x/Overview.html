<!DOCTYPE html>
<html lang="en" data-layout="section">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="URL Shape: Overview">
  <title>Overview | URL Shape</title>
  <link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.3/dist/css/base.css">
  <link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.3/dist/css/section.css">
  <link rel="icon" type="image/png" href="/assets/t8.png">
  <link rel="stylesheet" href="/assets/entry.css">
</head>
<body>
<div class="layout">
<div class="body">
<main>
<h1><a href="/url-shape/">URL Shape</a></h1>
<h2 id="Creating_a_URL_schema_with_validation_libs_like_Zod">Creating a URL schema with validation libs like Zod</h2>
<pre><code class="language-ts">import { createURLSchema } from "url-shape";
import { z } from "zod";

export const { url, validate } = createURLSchema({
  "/": z.object({}), // Goes without parameters
  "/sections/:id": z.object({
    params: z.object({
      id: z.coerce.number(),
    }),
  }),
  "/search": z.object({
    query: z.object({
      term: z.string(),
      view: z.optional(z.enum(["full", "compact"])),
    }),
  }),
});
</code></pre>
<p>⬥ <code>createURLSchema()</code> accepts a URL schema defined with any validation lib supporting the <a href="https://github.com/standard-schema/standard-schema#readme" target="_blank">Standard Schema</a> spec, including Zod, ArkType, Valibot, or Yup.</p>
<p>⬥ With Zod, mind the <code>.coerce</code> part in the schema for non-string parameters so that string URL components are converted to the preferred types.</p>
<h2 id="Using_a_URL_schema">Using a URL schema</h2>
<p>Use the functions returned from <code>createURLSchema()</code> to build and validate URLs in a type-safe manner. A type-aware code editor highlights typos in the URLs and type mismatches in their parameters.</p>
<pre><code class="language-ts">url("/sections/:id", { params: { id: 10 } }).href // "/sections/10"
url("/sections/:id", { params: { id: 10 } }).toString() // "/sections/10"
String(url("/sections/:id", { params: { id: 10 } })) // "/sections/10"

url("/sections/:id").exec("/sections/42") // { params: { id: 42 } }
url("/sections/:id").exec("/x/42") // null

url("/sections/:id").compile({ params: { id: 10 } }) // "/sections/10"
url("/search").compile({ query: { term: "shape" } }) // "/search?term=shape"

validate("/sections/10") // true, found in the schema
validate("/x") // false, not found in the schema
</code></pre>
<h2 id="Null_schema">Null schema</h2>
<p>By having <code>null</code> as a URL schema, the URL builder can be used without schema validation:</p>
<pre><code class="language-ts">const { url, validate } = createURLSchema(null);

url("/sections/:id", { params: { id: "x" } }) // "/sections/x"
url("/x/:name").exec("/x/intro") // { params: { name: "intro" } }
validate("/x") // true, all URLs are fine when there's no schema
</code></pre>
<p class="pagenav">
  <span class="prev">
    <span class="icon">←</span>
    <a href="/url-shape/">Intro</a>
  </span>
  <span class="sep">|</span>
  <span class="repo"><a href="https://github.com/t8js/url-shape" target="_blank">GitHub</a></span>
</p>
</main>
<hr>
<nav class="aux">
<section>
<p class="title">Contents</p>
<ul><li><a href="/url-shape/x/Overview#Creating_a_URL_schema_with_validation_libs_like_Zod">Creating a URL schema with validation libs like Zod</a></li>
<li><a href="/url-shape/x/Overview#Using_a_URL_schema">Using a URL schema</a></li>
<li><a href="/url-shape/x/Overview#Null_schema">Null schema</a></li>
</ul>
<p class="title">Resources</p>
<ul>
  <li><a href="https://github.com/t8js/url-shape" target="_blank">GitHub</a></li>
  <li><a href="https://www.npmjs.com/package/url-shape" target="_blank">npm</a></li>
</ul>
</section>
<section class="related">
  <p class="title">Also with vanilla TS/JS</p>
  <ul>
    <li><a href="/router" data-name="@t8/router">T8 Router</a></li>
    <li><a href="/store" data-name="@t8/store">T8 Store</a></li>
  </ul>
  <p class="title">With React</p>
  <ul>
    <li><a href="/react-router" data-name="@t8/react-router">T8 React Router</a></li>
    <li><a href="/react-store" data-name="@t8/react-store">T8 React Store</a></li>
    <li><a href="/react-pending" data-name="@t8/react-pending">T8 React Pending</a></li>
  </ul>
</section>
</nav>
</div>
</div>
<link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/stackoverflow-light.min.css" media="(prefers-color-scheme: light)">
<link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/base16/material.min.css" media="(prefers-color-scheme: dark)">
<link rel="stylesheet" href="https://unpkg.com/@t8/docsgen@0.3/dist/css/code.css">
<script src="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/highlight.min.js"></script>
<script>hljs.highlightAll()</script>
<script src="/assets/stats.js"></script>
</body>
</html>
